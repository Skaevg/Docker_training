# Вопросы
## что есть контейнер
Есть разные способы создания контейнеров.
- Docker
- Systemd-nspawn
- LXC

Если рассматривать на основе OCI (Open Container Initiative) предпологает следующее определение "Среда для выполнения процессов с настраиваемой изоляцией и ограничениями ресурсов. Например пространства имен, ограничения ресурсов и монтирования - это все часть среды контейнеров"

## Зачем нудны контейнеры? Какова их цель
OCI дает хорошее объяснение "Определите единицу доставки программного обеспечения, называемую стандартным контейнером. Цель стандартного контейнера - инкапсулирвоние программных компонентов и всех его зависимостей в самоописываемый и переносимый формат, чтобы любая совместимая хост-машина могла его запустить без доп зависимостей, независимо от базового ПК и содержимого контейнера".

## Что есть образ контейнера?
Образ контейнера содержит приложение его зависимости и опер систему, в которой приложение выполняется. Это коллекция слоев доступных для чтения. Слои слабо связаны. Каждый слой собирается из одного или нескольких файлов.

## Чем контейнеры отличаются от виртуальной машины ?
Основное различие между контейнерами и виртуальными машинами заключается в том, что контейнеры позволяют визуализировать несколько рабочих нагрузок в одной операционной системе, в то время как в случае виртуальных машин оборудование виртуализируется для запуска нескольких машин, каждая из которых имеет собственную гостевую ОС. Контейнеры предназначены для виртуализации на уровне ОС, вирт машины для виртуализации оборудования.
Контейнерам не требуется целая гостевая операционная система в качестве виртуальных машин.
Контейнеры используют совместно ядро системы в отличие от вирт машин. Они изолируют себя с помощью функций ядра, таких как пространство имен и контрольных групп.
Настройка контейнера обычно занимает несколько секунд, в отличие от виртуальных машин у которых требуется инициализации ОС.
Виртуальные машины считаются более защищенными чем контейнеры. 
Переносимость виртуальных машин считается ограниченной по сравнению с контейнерами.

## В каких сценариях вы используете контейнеры и в каких выберете виртуальные машины.
Вам следует выбрать виртуальную машину когда:
- вам надо запустить приложение которому требуются все ресурсы и фукнционал ОС.
- вам требуется полная изоляция и безопасность.
Ваш выбор контенеры когда:
- Вам надо леговестное решение
- Запуск множества версий или экземпляров одного приложения.

## Опишите процесс контейнеризации приложения.
1. Написание контейнерфайла/Докерфайла, включающее ваше приложение (включающеие команды для запуска ) и его зависимости
2. Создайте образ используя написанный докерфайл.
3. При необходимости отправить его в реестр. Докерхаб
4. Запустить контейнер используя образ.

## Какие преимущества использования контенейров? Вы можете сравнить с другими опциями такими как виртуальными машинами.
- Переиспользование. Контейнер может быть использован множеством разных пользователей для разных целей - производства, поэтапной подготовки, разарботка, тестирование и другие
- Легковестность: контейнеры достаточно легки для развертывания это может быть выполнено быстро, т.к. не требует его установки полной ОСи ( в отличие от виртуальных )
# Команды команд
Podman имеет архитектуру без демона, позволяя работать с контейнерами без рут привеле
Поправка: я использовал podman в ответах, но можно использовать другие движки контейнеров(такие как докер) 
## Как запустить контейнер?
docker run "имя контейнера"
## Почему после запуска в списках контейнера пусто?
Контейнер без команд после запуска считается выполненым и завершает работу. Можно добавить sleep 100 для работы контейнера 100 секунд, либо -it /bin/bash для интерактивного режима и псевдотерминала бин баш.
## Как вывести список всех контейнеров на локальной машине?
docker ps -a
## Как подключить вашу оболочку терминала к работающему контейнеру?
docker exec -it [container id/name] bash
## Правда или ложь? Вы можете удалить работающий контейнер если в нем ничего не выполняется.
Ложь, вы можете остановить и потом удалить его.
## Как остановить и удалить контейнер?
docker stop [ocntainer id/name] && docker container rm [container id/name]

## Что произойдет когда вы выполните docker container run ubuntu?
1. Докер клиент отправит команду по API работающему серверу  как часть докер демона.
2. Докер демон проверит локальные образы
3. Если он имеется, использует его
4. Если не найдет его, направиться к удаленному репозиторию (Docker hub по умолчанию) и вытянет образ на локальную машину.
5. контейнер пробежиться по инструкциям демона, создать и запустить контейнер.

## Как запустить контейнер в фоне?
С помощью флага -d (detach) и тогда он работает в фоне и не подключается к терминалу.
docker container run -d [container id/name]

## Если вы запустили sleep 100 внутри контейнера, увидем ли мы  его при перечислении всех процессов на хосте когда контейнер запущен ? И почему?
Увидим через дочерние процессы.

## Правда или ложь? Если образ httpd-service имеент инструкция entrypoint для запуска и мы через клиент напишем другую команду docker run httpd-service ls, будет ли выполнена команда entrypoint?
Ложь. Запущенная команду перепишет ентрипоинт для httpd-service не запустит и вместо этого будет выполнена команда ls (вывод списка контейнеров в podman)

##  Правда или ложь? Выполнение docker restart [container id/name] убьет главный просс внутри контейнера и запустит снова на sctratch
Ложь. docker restart  создаст совершенно новый контейнер с тем же ID повторно используя файловую систему и состояние исходного контейнера.

## Вы хотите запустить веб сервер внутри контейнера но, доступ из локалхоста. Продемострируйте как это сделать.
docker run -d --name apache1 -p 8080:8080 registry.redhat.io/rhe18/httpd-24 curl 127.0.0.1:8080

## После запуска контейнера он остановлен. docker ps ничего не показывает. Как мы можем посмотреть детали?
docker ps -a покажет детали остановки контейнера.

## Как получить список всех тегов образа для данного контейнер образа.
docker search --list-tags IMAGE_NAME
# Образы
## Почему образы контейнеров относительно малы?
Большинство образов не содержат ядро. Они совместно испольуют и получают доступ к тому, который используется хостом, на котором они работают.
Контейнеры предназначены в большинстве случаев для запуска контректного приложения. Это означает, что они содержат только то, что необходимо для запуска.

## Вам интересно в запустить контейнер с приложением игрой змейка. Как вы можете найти образ и проверить существует ли оно.
docker search snake-game. выведет совпадающий список образов.

## как послучить список образов контейнера на определенном хосте
CONTAINER_BINARY=podman(docker)
$ CONTAINER_BINARY images
Так же вариант: $CONTAINER_RUNTIME image ps

## Невозможно удалить образ если контейнер использует его.
Да, следует остановить и удалить контейнер после пробовать удалить образ.

## Если тэг  не указан при извлечении образа, использует тег последний.
Да

## Использование тэга latest когда извлекаете образ, означает что вы извлекаете самое последне опубликованный образ?
Ложь. Иногда это может быть правдой, тег latest не гарантирует что получите последнее опубликованный образ.
Иногда для этого может использоваться тэг "edge"
## Где храняться извлекаеммые образы в хранилище.
/var/lib/docker

